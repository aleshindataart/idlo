!function(B,M,S,t,a){"use strict";var j,o,e="colorbox",n="b-cbox",D="b-"+e,d="#"+e,h="is-"+n,r="[data-"+e+"-trigger]:not(."+h+")",L="media media--box",U=L+" media--ratio",W="#cboxLoadedContent",s=M.sanitizer,O=M.instagram||!1,Q="b-provider--",l={},q=t.colorbox||{};function i(t){var f=B(d),e=B(t),g=e.data("bMedia")||e.data("media")||{},i=e.data("oembedUrl"),n=t.href||"x";i&&(n=i);var b=g.provider,x=g.boxType,t=g.token,v="iframe"===x&&!s.isDangerous("href",n),p="pinterest"===b,C=g.paddingHack||!1,w="html"in g,i=l[t];w&&!i&&(i=g.html,g.encoded&&(i=atob(i)),i=s.sanitize(i),l[t]=i);i={href:n,html:i,rel:g.rel||null,iframe:v,title:function(){var t=e.next(".litebox__caption");return t.length?s.sanitize(t[0].innerHTML):""},onComplete:function(){a.clearTimeout(o),o=a.setTimeout(function(){var t,e,i,n,a,o,d,h,r,s,l,c,m,u;y(),B("#cboxOverlay").is(":visible")&&(f.addClass(D+"--"+x),b&&f.addClass(Q+b),(v||w)&&(t=q.maxWidth,e=q.maxHeight,a=T(i=(C?g.width:g.owidth)||t,n=C?g.height:e),o=!0,d=B(W),h=d[0],r=B("iframe",h),s=B(".media",h),l=d.find("picture img"),c=d.find("img[srcset]"),m=c.length||l.length,u=s.hasClass("b-instagram")&&O,s.length&&S.attachBehaviors(s[0]),m?(function(t,e){var i;k(function(){(i=(t.length?t:e)[0])&&(i.complete?_.call(i):B(i).one("load",_))},101)}(l,c),a=T(i=t||g.width,n=e||g.height)):p&&(a=T(i="320px",n=e)),(r=B("iframe",h)).length?(r.addClass("media__element"),u?(o=!1,function(t,e){k(function(){O.show(function(t){180<t.width&&(e=T(t.width+"px",t.height+"px")),z(e)},t[0])},101)}(r,a)):C||r.on("load",function(){var t=B(this);k(function(){i=t.width()+"px",n=t.height()+"px",z(a=T(i,n))})}),s.length||(d.addClass(L+" media--"+b),C&&function(t,e){r.attr("width",e.width).attr("height",e.height),e=M.image.ratio(e)+"%",t.css(H(e,0)).addClass(U)}(d,a))):d.css(H("",a.height)).removeClass(U+" media--"+b),o&&z(a))),j=b})},onCleanup:function(){var t=(f=B(d)).find(".media");t.length&&S.detachBehaviors(t[0])},onClosed:function(){y()}};function y(){(f=B(d)).removeClass(Q+j),f.removeClass(function(t,e){return(e.match(/(^|\s)b-colorbox-\S+/g)||[]).join(" ")})}function z(t){B.colorbox.resize({innerWidth:t.width,innerHeight:t.height})}function T(t,e){return M.image.dimension(t,e)}function H(t,e){return M.image.hack(t,e)}function _(){var t=B(this),e=t.width(),i=t.height(),n=t.closest(W),a=n.width(),n=n.height();n<i?t.css("top",-(i-n)/2):i<n?(t.css({height:n,width:"auto"}),t.css("left",-(t.width()-a)/2)):e<a&&z(T(e,i))}function k(t,e){a.setTimeout(t,e||0)}e.colorbox(B.extend({},q,i)),e.addClass(h)}S.behaviors.blazyColorbox={attach:function(t){M.isUnd(q)||q.mobiledetect&&M.matchMedia(q.mobiledevicewidth)||M.once(i,n,r,t).length&&B(d).attr("aria-label","color box").addClass(D)},detach:function(t,e,i){"unload"===i&&M.once.removeSafely(n,r,t)}}}(jQuery,dBlazy,Drupal,drupalSettings,this,this.document);
